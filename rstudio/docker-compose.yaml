version: '2.4'
services:
  agent:
    container_name: "inverting-proxy-agent"
    image: "gcr.io/inverting-proxy/agent"
    restart: always
    environment:
      HOSTNAME: "application-server"
      PORT: '8787'
      SHIM_PATH: 'websocket-shim'
      REWRITE_WEBSOCKET_HOST: 'true'
  app:
    container_name: "application-server"
    image: "ghcr.io/rocker-org/devcontainer/tidyverse:4.2"
    restart: always
    volumes:
      - /home/rstudio
    ports:
      - '8787:8787'
    environment:
      "DISABLE_AUTH": "true"
